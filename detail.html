<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìƒí’ˆ ìƒì„¸ ì •ë³´ - VAPING ALL</title>
    <style>
        body { font-family: 'Apple SD Gothic Neo', sans-serif; margin: 0; background: #f5f5f5; color: #333; line-height: 1.6; }
        nav { background: #000; color: white; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; }
        .logo { cursor: pointer; font-weight: 900; font-size: 24px; letter-spacing: 2px; }
        .container { max-width: 1000px; margin: 50px auto; padding: 0 5%; display: flex; gap: 50px; flex-wrap: wrap; }
        .product-img-box { flex: 1; min-width: 300px; }
        .product-img-box img { width: 100%; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); background: #fff; }
        .product-info-box { flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; }
        .category-tag { color: #999; font-size: 14px; margin-bottom: 10px; }
        h1 { margin: 0 0 20px 0; font-size: 32px; font-weight: 800; }
        .price { font-size: 28px; color: #ff4757; font-weight: bold; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        .description { color: #666; margin-bottom: 40px; }
        .button-group { display: flex; gap: 10px; }
        .btn { flex: 1; padding: 18px; border-radius: 10px; font-weight: bold; cursor: pointer; border: none; font-size: 16px; transition: 0.3s; }
        .btn-cart { background: #000; color: #fff; }
        .btn-back { background: #fff; color: #333; border: 1px solid #ddd; }
        footer { background: #333; color: #aaa; padding: 40px 5%; font-size: 13px; margin-top: 100px; text-align: center; }
    </style>
</head>
<body>

    <nav>
        <div class="logo" onclick="location.href='index.html'">VAPING ALL</div>
        <button onclick="location.href='cart.html'" style="background:#333; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">ğŸ›’ ì¥ë°”êµ¬ë‹ˆ</button>
    </nav>

    <div class="container">
        <div class="product-img-box">
            <img id="detail-img" src="https://via.placeholder.com/500" alt="ìƒí’ˆ ì´ë¯¸ì§€">
        </div>

        <div class="product-info-box">
            <div class="category-tag">PREMIUM VAPING SHOP</div>
            <h1 id="detail-name">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤...</h1>
            <div class="price" id="detail-price">0ì›</div>
            
            <div class="description">
                <b>[ìƒí’ˆ ì„¤ëª…]</b><br>
                <span id="detail-desc">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤...</span>
                <br><br>
                <p style="font-size: 0.9em; color: #999;">
                    ë³¸ ìƒí’ˆì€ VAPING ALLì—ì„œ ì—„ê²©í•œ ê²€ìˆ˜ë¥¼ ê±°ì¹œ ì •í’ˆì…ë‹ˆë‹¤.<br>
                    ë¯¸ì„±ë…„ìëŠ” êµ¬ë§¤ê°€ ë¶ˆê°€ëŠ¥í•˜ë©°, ì‚¬ìš© ì „ ì£¼ì˜ì‚¬í•­ì„ ë°˜ë“œì‹œ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
                </p>
            </div>

            <div class="button-group">
                <button class="btn btn-cart" onclick="addToCartFromDetail()">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
                <button class="btn btn-back" onclick="history.back()">ë’¤ë¡œê°€ê¸°</button>
            </div>
        </div>
    </div>

    <footer>
        &copy; 2025 VAPING ALL. All Rights Reserved.
    </footer>

    <script>
        // ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ì—¬ í•¨ìˆ˜ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•¨
        let currentProduct = {};

        window.onload = function() {
            try {
                // 1. URL íŒŒë¼ë¯¸í„° ì½ê¸°
                const params = new URLSearchParams(window.location.search);
                
                // 2. ë°ì´í„° ì¶”ì¶œ ë° ì•ˆì „í•˜ê²Œ ë””ì½”ë”©
                currentProduct = {
                    id: params.get('id'),
                    name: params.get('name') ? decodeURIComponent(params.get('name')) : null,
                    price: params.get('price'),
                    image: params.get('image') ? decodeURIComponent(params.get('image')) : "https://via.placeholder.com/500",
                    desc: params.get('desc') ? decodeURIComponent(params.get('desc')) : "ìƒí’ˆ ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤."
                };

                // 3. ë°ì´í„° ê²€ì¦ (í•„ìˆ˜ ì •ë³´ê°€ ì—†ìœ¼ë©´ ë¹ ì ¸ë‚˜ê°)
                if (!currentProduct.name || !currentProduct.price) {
                    throw new Error("í•„ìˆ˜ ë°ì´í„° ëˆ„ë½");
                }

                // 4. í™”ë©´ UI ì—…ë°ì´íŠ¸
                document.getElementById('detail-name').innerText = currentProduct.name;
                document.getElementById('detail-price').innerText = parseInt(currentProduct.price).toLocaleString() + "ì›";
                document.getElementById('detail-img').src = currentProduct.image;
                document.getElementById('detail-desc').innerText = currentProduct.desc;
                document.title = currentProduct.name + " - VAPING ALL";

            } catch (error) {
                console.error("ìƒì„¸í˜ì´ì§€ ë¡œë”© ì—ëŸ¬:", error);
                alert("ìƒí’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.");
                location.href = 'index.html';
            }
        };

        function addToCartFromDetail() {
            if (!currentProduct.id) return;

            let cart = JSON.parse(localStorage.getItem('myCart')) || [];
            
            const foundIndex = cart.findIndex(item => item.id == currentProduct.id);
            if (foundIndex > -1) {
                cart[foundIndex].qty += 1;
            } else {
                cart.push({
                    id: currentProduct.id,
                    name: currentProduct.name,
                    price: parseInt(currentProduct.price),
                    image: currentProduct.image,
                    qty: 1
                });
            }

            localStorage.setItem('myCart', JSON.stringify(cart));
            
            if (confirm("ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ìŠµë‹ˆë‹¤. ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ë¡œ ì´ë™í• ê¹Œìš”?")) {
                location.href = 'cart.html';
            }
        }
    </script>
</body>
</html>